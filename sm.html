<!DOCTYPE html>
<html>
<head>
    <title>手动对焦</title>
</head>
<body>
    <div id="video-container">
        <video id="video" width="100%" height="auto"></video>
        <canvas id="canvas" style="display:none;"></canvas>
    </div>

    <button id="focus-button">手动对焦</button>

    <script>
        var video = document.getElementById('video');
        var canvas = document.getElementById('canvas');
        var focusButton = document.getElementById('focus-button');

        // 获取用户摄像头访问权限并播放视频流
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                video.srcObject = stream;
                video.play();
            })
            .catch(function(error) {
                console.log('无法访问摄像头：', error);
            });

        // 手动对焦事件处理程序
        focusButton.addEventListener('click', function() {
            var track = video.srcObject.getVideoTracks()[0];
            var capabilities = track.getCapabilities();

            // 检查是否支持手动对焦
            if ('focusMode' in capabilities && Array.isArray(capabilities.focusMode)) {
                // 切换到手动对焦模式
                track.applyConstraints({ advanced: [{ focusMode: 'manual' }] })
                    .catch(function(error) {
                        console.log('无法切换到手动对焦模式：', error);
                    });
            } else {
                console.log('摄像头不支持手动对焦。');
            }
        });
    </script>
</body>
</html>
